{% extends 'base.html' %}
{% load static %}

{% block title %}
ìˆœìœ„ | ì§ëŒì´
{% endblock %}

{% load custom_filters %}

{% block body %}

<!-- âœ… íƒ­ ë²„íŠ¼ ì˜ì—­ -->
<div class="w-full max-w-6xl mx-auto mt-10 my-3 px-4 text-center">
  <div class="flex justify-center my-3">
    <button onclick="showTab('ranking')" id="ranking-tab"
            class="tab-btn w-[200px] h-[70px] bg-[url('/static/cal/images/standing/standing_kbo.png')] bg-no-repeat bg-contain bg-center">
    </button>

    <button onclick="showTab('hitters')" id="hitters-tab"
            class="tab-btn w-[200px] h-[70px] bg-[url('/static/cal/images/standing/standing_hitter.png')] bg-no-repeat bg-contain bg-center">
    </button>

    <button onclick="showTab('pitchers')" id="pitchers-tab"
            class="tab-btn w-[200px] h-[70px] bg-[url('/static/cal/images/standing/standing_pitcher.png')] bg-no-repeat bg-contain bg-center">
    </button>
  </div>

  <!-- âœ… KBO ìˆœìœ„ -->
  <div id="ranking" class="tab-content">
    <div class="standing-box p-6 mb-8 bg-white text-xs sm:text-sm">
      <div class="relative w-full">
        <div class="flex justify-end mb-2">
          <button onclick="scrollRankingLeft()" class="text-sm bg-blue-100 px-3 py-1 rounded shadow hover:bg-gray-300 transition">â¬…</button>
          <button onclick="scrollRankingRight()" class="text-sm bg-blue-100 px-3 py-1 rounded shadow hover:bg-gray-300 transition ml-2">â¡</button>
        </div>
        
        <div class="flex w-full relative rounded-[15px] overflow-hidden border border-gray-300">

          <!-- ê³ ì • ì—´ -->
          <div class="sticky left-0 z-20 w-[180px] bg-white/90 border-r border-gray-300">
            <table class="table-fixed border-collapse w-full">
              <thead class="bg-blue-100">
                <tr>
                  <th class="px-1 py-1"></th>
                  <th class="px-1 py-1">íŒ€</th>
                </tr>
              </thead>
              <tbody>
                {% for team in standing %}
                <tr class="border-b border-gray-300 bg-[#f9f9f9] {% if team.team == user.team %}bg-yellow-100 font-bold text-black{% endif %}">
                  <td class="px-1 py-1 text-center">{{ forloop.counter }}</td>
                  <td class="px-1 py-1 whitespace-nowrap flex items-center">
                    <img src="/static/cal/images/team/{{ team.team }}.svg" class="w-5 h-5">
                    {{ team.team|team_name }}
                  </td>
                </tr>
                {% endfor %}
              </tbody>
            </table>
          </div>

          <!-- ìŠ¤í¬ë¡¤ ì—´ -->
          <div id="ranking-scroll-wrapper" class="overflow-x-auto scroll-smooth w-full hide-scrollbar">
            <table id="ranking-table" class="table-fixed border-collapse w-full bg-white">
              <thead class="bg-blue-100">
                <tr>
                  <th class="px-1 py-1 w-[50px]">ê²½ê¸°</th>
                  <th class="px-1 py-1 w-[40px]">ìŠ¹</th>
                  <th class="px-1 py-1 w-[40px]">íŒ¨</th>
                  <th class="px-1 py-1 w-[40px]">ë¬´</th>
                  <th class="px-1 py-1 w-[60px]">ìŠ¹ë¥ </th>
                  <th class="px-1 py-1 w-[60px]">ê²Œì„ì°¨</th>
                  <th class="px-1 py-1 w-[60px]">ì—°ì†</th>
                  <th class="px-1 py-1 w-[60px]">í™ˆ</th>
                  <th class="px-1 py-1 w-[60px]">ì›ì •</th>
                  <th class="px-1 py-1 w-[60px]">ì´ë²ˆì£¼</th>
                  <th class="px-1 py-1 w-[120px]">ìµœê·¼</th>
                </tr>
              </thead>
              <tbody>
                {% for team in standing %}
                <tr class="border-b border-gray-300 bg-[#f9f9f9] {% if team.team == user.team %}bg-yellow-100 font-bold text-black{% endif %}">
                  <td class="px-1 py-1 text-center">{{ team.G }}</td>
                  <td class="px-1 py-1 text-center">{{ team.W }}</td>
                  <td class="px-1 py-1 text-center">{{ team.L }}</td>
                  <td class="px-1 py-1 text-center">{{ team.D }}</td>
                  <td class="px-1 py-1 text-center">{{ team.win_percent }}</td>
                  <td class="px-1 py-1 text-center">{{ team.games_behind }}</td>
                  <td class="px-1 py-1 text-center">{{ team.streak }}</td>
                  <td class="px-1 py-1 text-center">{{ team.home }}</td>
                  <td class="px-1 py-1 text-center">{{ team.away }}</td>
                  <td class="px-1 py-1 text-center">{{ team.weekly }}</td>
                  <td class="px-1 py-1 text-center">
                    {% for result in team.recent_results %}
                    <span class="{% if result == 'ìŠ¹' %}text-blue-600{% elif result == 'íŒ¨' %}text-red-500{% else %}text-gray-500{% endif %} font-semibold text-sm mr-1">
                      {{ result }}
                    </span>
                    {% endfor %}
                  </td>
                </tr>
                {% endfor %}
              </tbody>
            </table>
          </div>
        </div>

      </div>
    </div>
  </div>

  <!-- âœ… íƒ€ì ìˆœìœ„ -->
<div id="hitters" class="tab-content">
  <div class="standing-box bg-white shadow p-6 mb-8 text-xs sm:text-sm">
    
    <!-- ğŸ”˜ ìŠ¤í¬ë¡¤ ë²„íŠ¼ -->
    <div class="flex justify-end mb-2">
      <button onclick="scrollHitter(-1)" class="text-sm bg-blue-100 px-3 py-1 rounded shadow hover:bg-gray-300 transition">â¬…</button>
      <button onclick="scrollHitter(1)" class="text-sm bg-blue-100 px-3 py-1 rounded shadow hover:bg-gray-300 transition ml-2">â¡</button>
    </div>

    <!-- âœ… í…Œì´ë¸” ì „ì²´ ë°•ìŠ¤ -->
    <div class="relative w-full flex rounded-[15px] overflow-hidden border border-gray-300">
      
      <!-- ğŸ“Œ ê³ ì • ì—´ -->
      <div class="w-[180px] overflow-hidden border-r border-gray-300 bg-white/90">
        <table class="table-fixed border-collapse w-full sticky" id="hitter-fixed">
          <thead class="bg-blue-100">
            <tr>
              <th class="px-1 py-1"></th>
              <th class="px-1 py-1">ì´ë¦„</th>
            </tr>
          </thead>
          <tbody>
            {% for hitter in hitter_stats %}
            <tr class="border-b border-b-gray-300 bg-[#f9f9f9]">
              <td class="px-1 py-1 text-center">{{ forloop.counter }}</td>
              <td class="px-1 py-1 whitespace-nowrap text-center">{{ hitter.player_name }}</td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>

      <!-- ğŸ“Œ ìŠ¤í¬ë¡¤ ì—´ -->
      <div id="hitter-scroll-wrapper" class="overflow-x-auto scroll-smooth w-full hide-scrollbar">
        <table id="hitter-table" class="table-fixed border-collapse w-full bg-white">
          <thead class="bg-blue-100">
            <tr>
              <th class="px-1 py-1 w-[80px] cursor-pointer hover:underline" onclick="sortTable('hitter-table', 0)">íƒ€ìœ¨</th>
              <th class="px-1 py-1 w-[80px] cursor-pointer hover:underline" onclick="sortTable('hitter-table', 1)">ê²½ê¸°</th>
              <th class="px-1 py-1 w-[80px] cursor-pointer hover:underline" onclick="sortTable('hitter-table', 2)">íƒ€ì„</th>
              <th class="px-1 py-1 w-[80px] cursor-pointer hover:underline" onclick="sortTable('hitter-table', 3)">íƒ€ìˆ˜</th>
              <th class="px-1 py-1 w-[60px] cursor-pointer hover:underline" onclick="sortTable('hitter-table', 4)">ë“ì </th>
              <th class="px-1 py-1 w-[60px] cursor-pointer hover:underline" onclick="sortTable('hitter-table', 5)">ì•ˆíƒ€</th>
              <th class="px-1 py-1 w-[60px] cursor-pointer hover:underline" onclick="sortTable('hitter-table', 6)">2ë£¨íƒ€</th>
              <th class="px-1 py-1 w-[60px] cursor-pointer hover:underline" onclick="sortTable('hitter-table', 7)">3ë£¨íƒ€</th>
              <th class="px-1 py-1 w-[60px] cursor-pointer hover:underline" onclick="sortTable('hitter-table', 8)">í™ˆëŸ°</th>
              <th class="px-1 py-1 w-[80px] cursor-pointer hover:underline" onclick="sortTable('hitter-table', 9)">ë£¨íƒ€</th>
              <th class="px-1 py-1 w-[60px] cursor-pointer hover:underline" onclick="sortTable('hitter-table', 10)">íƒ€ì </th>
              <th class="px-1 py-1 w-[60px] cursor-pointer hover:underline" onclick="sortTable('hitter-table', 11)">í¬ìƒíƒ€</th>
              <th class="px-1 py-1 w-[90px] cursor-pointer hover:underline" onclick="sortTable('hitter-table', 12)">í¬ìƒí”Œë¼ì´</th>
              <th class="px-1 py-1 w-[60px] cursor-pointer hover:underline" onclick="sortTable('hitter-table', 13)">ë³¼ë„·</th>
              <th class="px-1 py-1 w-[80px] cursor-pointer hover:underline" onclick="sortTable('hitter-table', 14)">ê³ ì˜ ì‚¬êµ¬</th>
              <th class="px-1 py-1 w-[90px] cursor-pointer hover:underline" onclick="sortTable('hitter-table', 15)">ëª¸ì— ë§ëŠ” ê³µ</th>
              <th class="px-1 py-1 w-[60px] cursor-pointer hover:underline" onclick="sortTable('hitter-table', 16)">ì‚¼ì§„</th>
              <th class="px-1 py-1 w-[60px] cursor-pointer hover:underline" onclick="sortTable('hitter-table', 17)">ë³‘ì‚´íƒ€</th>
              <th class="px-1 py-1 w-[80px] cursor-pointer hover:underline" onclick="sortTable('hitter-table', 18)">ì¥íƒ€ìœ¨</th>
              <th class="px-1 py-1 w-[80px] cursor-pointer hover:underline" onclick="sortTable('hitter-table', 19)">ì¶œë£¨ìœ¨</th>
              <th class="px-1 py-1 w-[80px] cursor-pointer hover:underline" onclick="sortTable('hitter-table', 20)">OPS</th>
              <th class="px-1 py-1 w-[80px] cursor-pointer hover:underline" onclick="sortTable('hitter-table', 21)">ë©€í‹°íˆíŠ¸</th>
              <th class="px-1 py-1 w-[100px] cursor-pointer hover:underline" onclick="sortTable('hitter-table', 22)">ë“ì ê¶Œ íƒ€ìœ¨</th>
              <th class="px-1 py-1 w-[90px] cursor-pointer hover:underline" onclick="sortTable('hitter-table', 23)">PH_BA</th>
              <th class="px-1 py-1 w-[80px] cursor-pointer hover:underline" onclick="sortTable('hitter-table', 24)">ë„ë£¨ ì‹œë„</th>
              <th class="px-1 py-1 w-[60px] cursor-pointer hover:underline" onclick="sortTable('hitter-table', 25)">ë„ë£¨</th>
              <th class="px-1 py-1 w-[90px] cursor-pointer hover:underline" onclick="sortTable('hitter-table', 26)">ë„ë£¨ ì‹¤íŒ¨</th>
            </tr>
          </thead>

          <tbody>
            {% for hitter in hitter_stats %}
            <tr class="border-b border-gray-300 bg-[#f9f9f9]">
              <td class="px-1 py-1 text-center">{{ hitter.AVG }}</td>
              <td class="px-1 py-1 text-center">{{ hitter.G }}</td>
              <td class="px-1 py-1 text-center">{{ hitter.PA }}</td>
              <td class="px-1 py-1 text-center">{{ hitter.AB }}</td>
              <td class="px-1 py-1 text-center">{{ hitter.R }}</td>
              <td class="px-1 py-1 text-center">{{ hitter.H }}</td>
              <td class="px-1 py-1 text-center">{{ hitter.H_2B }}</td>
              <td class="px-1 py-1 text-center">{{ hitter.H_3B }}</td>
              <td class="px-1 py-1 text-center">{{ hitter.HR }}</td>
              <td class="px-1 py-1 text-center">{{ hitter.TB }}</td>
              <td class="px-1 py-1 text-center">{{ hitter.RBI }}</td>
              <td class="px-1 py-1 text-center">{{ hitter.SAC }}</td>
              <td class="px-1 py-1 text-center">{{ hitter.SF }}</td>
              <td class="px-1 py-1 text-center">{{ hitter.BB }}</td>
              <td class="px-1 py-1 text-center">{{ hitter.IBB }}</td>
              <td class="px-1 py-1 text-center">{{ hitter.HBP }}</td>
              <td class="px-1 py-1 text-center">{{ hitter.SO }}</td>
              <td class="px-1 py-1 text-center">{{ hitter.GDP }}</td>
              <td class="px-1 py-1 text-center">{{ hitter.SLG }}</td>
              <td class="px-1 py-1 text-center">{{ hitter.OBP }}</td>
              <td class="px-1 py-1 text-center">{{ hitter.OPS }}</td>
              <td class="px-1 py-1 text-center">{{ hitter.MH }}</td>
              <td class="px-1 py-1 text-center">{{ hitter.RISP }}</td>
              <td class="px-1 py-1 text-center">{{ hitter.PH_BA }}</td>
              <td class="px-1 py-1 text-center">{{ hitter.SBA }}</td>
              <td class="px-1 py-1 text-center">{{ hitter.SB }}</td>
              <td class="px-1 py-1 text-center">{{ hitter.CS }}</td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>


  <!-- âœ… íˆ¬ìˆ˜ ìˆœìœ„ -->
<div id="pitchers" class="tab-content hidden">
    <div class="standing-box bg-white shadow p-6 mb-8 text-xs sm:text-sm">

      <div class="flex justify-end mb-2">
        <button onclick="scrollPitcher(-1)" class="text-sm bg-blue-100 px-3 py-1 rounded shadow hover:bg-gray-300 transition">â¬…</button>
        <button onclick="scrollPitcher(1)" class="text-sm bg-blue-100 px-3 py-1 rounded shadow hover:bg-gray-300 transition ml-2">â¡</button>
      </div>

      <div class="flex w-full relative rounded-[15px] overflow-hidden border border-gray-300">
        <div class="sticky left-0 z-20 w-[180px] bg-white/90 border-r border-gray-300">
          <table class="table-fixed border-collapse w-full">
            <thead class="bg-blue-100">
              <tr>
                <th class="px-1 py-1"></th>
                <th class="px-1 py-1">ì´ë¦„</th>
              </tr>
            </thead>
            <tbody>
              {% for pitcher in pitcher_stats %}
              <tr class="border-b border-b-gray-300 bg-[#f9f9f9]">
                <td class="px-1 py-1">{{ forloop.counter }}</td>
                <td class="px-1 py-1 whitespace-nowrap text-center">{{ pitcher.player_name }}</td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>

        <div id="pitcher-scroll-wrapper" class="overflow-x-auto scroll-smooth w-full hide-scrollbar">
          <table id="pitcher-table" class="table-fixed border-collapse w-full sticky bg-white">
            <thead class="bg-blue-100">
              <tr>
                <th class="px-1 py-1 w-[100px] cursor-pointer hover:underline" onclick="sortTable('pitcher-table', 0)">í‰ê· ìì±…ì </th>
                <th class="px-1 py-1 w-[60px] cursor-pointer hover:underline" onclick="sortTable('pitcher-table', 1)">ê²½ê¸°</th>
                <th class="px-1 py-1 w-[60px] cursor-pointer hover:underline" onclick="sortTable('pitcher-table', 2)">ì™„íˆ¬</th>
                <th class="px-1 py-1 w-[60px] cursor-pointer hover:underline" onclick="sortTable('pitcher-table', 3)">ì™„ë´‰</th>
                <th class="px-1 py-1 w-[60px] cursor-pointer hover:underline" onclick="sortTable('pitcher-table', 4)">ìŠ¹</th>
                <th class="px-1 py-1 w-[60px] cursor-pointer hover:underline" onclick="sortTable('pitcher-table', 5)">íŒ¨</th>
                <th class="px-1 py-1 w-[80px] cursor-pointer hover:underline" onclick="sortTable('pitcher-table', 6)">ì„¸ì´ë¸Œ</th>
                <th class="px-1 py-1 w-[60px] cursor-pointer hover:underline" onclick="sortTable('pitcher-table', 7)">í™€ë“œ</th>
                <th class="px-1 py-1 w-[80px] cursor-pointer hover:underline" onclick="sortTable('pitcher-table', 8)">ìŠ¹ë¥ </th>
                <th class="px-1 py-1 w-[100px] cursor-pointer hover:underline" onclick="sortTable('pitcher-table', 9)">ìƒëŒ€íƒ€ììˆ˜</th>
                <th class="px-1 py-1 w-[80px] cursor-pointer hover:underline" onclick="sortTable('pitcher-table', 10)">íˆ¬êµ¬ìˆ˜</th>
                <th class="px-1 py-1 w-[100px] cursor-pointer hover:underline" onclick="sortTable('pitcher-table', 11)">ì´ë‹</th>
                <th class="px-1 py-1 w-[60px] cursor-pointer hover:underline" onclick="sortTable('pitcher-table', 12)">í”¼ì•ˆíƒ€</th>
                <th class="px-1 py-1 w-[60px] cursor-pointer hover:underline" onclick="sortTable('pitcher-table', 13)">2ë£¨íƒ€</th>
                <th class="px-1 py-1 w-[60px] cursor-pointer hover:underline" onclick="sortTable('pitcher-table', 14)">3ë£¨íƒ€</th>
                <th class="px-1 py-1 w-[80px] cursor-pointer hover:underline" onclick="sortTable('pitcher-table', 15)">í”¼í™ˆëŸ°</th>
                <th class="px-1 py-1 w-[60px] cursor-pointer hover:underline" onclick="sortTable('pitcher-table', 16)">í¬ìƒíƒ€</th>
                <th class="px-1 py-1 w-[100px] cursor-pointer hover:underline" onclick="sortTable('pitcher-table', 17)">í¬ìƒí”Œë¼ì´</th>
                <th class="px-1 py-1 w-[60px] cursor-pointer hover:underline" onclick="sortTable('pitcher-table', 18)">ë³¼ë„·</th>
                <th class="px-1 py-1 w-[80px] cursor-pointer hover:underline" onclick="sortTable('pitcher-table', 19)">ê³ ì˜ì‚¬êµ¬</th>
                <th class="px-1 py-1 w-[60px] cursor-pointer hover:underline" onclick="sortTable('pitcher-table', 20)">ì‚¼ì§„</th>
                <th class="px-1 py-1 w-[60px] cursor-pointer hover:underline" onclick="sortTable('pitcher-table', 21)">í­íˆ¬</th>
                <th class="px-1 py-1 w-[50px] cursor-pointer hover:underline" onclick="sortTable('pitcher-table', 22)">ë³´í¬</th>
                <th class="px-1 py-1 w-[60px] cursor-pointer hover:underline" onclick="sortTable('pitcher-table', 23)">ì‹¤ì </th>
                <th class="px-1 py-1 w-[80px] cursor-pointer hover:underline" onclick="sortTable('pitcher-table', 24)">ìì±…ì </th>
                <th class="px-1 py-1 w-[100px] cursor-pointer hover:underline" onclick="sortTable('pitcher-table', 25)">ë¸”ë¡ ì„¸ì´ë¸Œ</th>
                <th class="px-1 py-1 w-[60px] cursor-pointer hover:underline" onclick="sortTable('pitcher-table', 26)">WHIP</th>
                <th class="px-1 py-1 w-[80px] cursor-pointer hover:underline" onclick="sortTable('pitcher-table', 27)">í”¼ì•ˆíƒ€ìœ¨</th>
                <th class="px-1 py-1 w-[40px] cursor-pointer hover:underline" onclick="sortTable('pitcher-table', 28)">QS</th>
              </tr>
            </thead>
            <tbody>
              {% for pitcher in pitcher_stats %}
              <tr class="border-b border-b-gray-300 bg-[#f9f9f9]">
                <td class="px-1 py-1">{{ pitcher.ERA }}</td>
                <td class="px-1 py-1">{{ pitcher.G }}</td>
                <td class="px-1 py-1">{{ pitcher.CG }}</td>
                <td class="px-1 py-1">{{ pitcher.SHO }}</td>
                <td class="px-1 py-1">{{ pitcher.W }}</td>
                <td class="px-1 py-1">{{ pitcher.L }}</td>
                <td class="px-1 py-1">{{ pitcher.SV }}</td>
                <td class="px-1 py-1">{{ pitcher.HLD }}</td>
                <td class="px-1 py-1">{{ pitcher.WPCT }}</td>
                <td class="px-1 py-1">{{ pitcher.TBF }}</td>
                <td class="px-1 py-1">{{ pitcher.NP }}</td>
                <td class="px-1 py-1">{{ pitcher.IP }}</td>
                <td class="px-1 py-1">{{ pitcher.H }}</td>
                <td class="px-1 py-1">{{ pitcher.H_2B }}</td>
                <td class="px-1 py-1">{{ pitcher.H_3B }}</td>
                <td class="px-1 py-1">{{ pitcher.HR }}</td>
                <td class="px-1 py-1">{{ pitcher.SAC }}</td>
                <td class="px-1 py-1">{{ pitcher.SF }}</td>
                <td class="px-1 py-1">{{ pitcher.BB }}</td>
                <td class="px-1 py-1">{{ pitcher.IBB }}</td>
                <td class="px-1 py-1">{{ pitcher.SO }}</td>
                <td class="px-1 py-1">{{ pitcher.WP }}</td>
                <td class="px-1 py-1">{{ pitcher.BK }}</td>
                <td class="px-1 py-1">{{ pitcher.R }}</td>
                <td class="px-1 py-1">{{ pitcher.ER }}</td>
                <td class="px-1 py-1">{{ pitcher.BSV }}</td>
                <td class="px-1 py-1">{{ pitcher.WHIP }}</td>
                <td class="px-1 py-1">{{ pitcher.AVG }}</td>
                <td class="px-1 py-1">{{ pitcher.QS }}</td>
              </tr>
              {% endfor %}
            </tbody>

          </table>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- ë°ìŠ¤í¬íƒ‘ ì €ë‹ˆ -->
<div id="introOverlay" class="fixed grid inset-0 bg-black/40 z-100 cursor-pointer hidden">
  <div class="text-white pt-24">
    <div id="introSteps" class="flex flex-col md:flex-row gap-6 px-4">
      <p class="p-4 bg-white/30 backdrop-blur-sm rounded-lg absolute left-1/2 top-[270px] -translate-x-1/2 hidden select-none">
        <strong class="text-2xl">ìˆœìœ„ ê²Œì‹œíŒ</strong>ì„ ì†Œê°œí•©ë‹ˆë‹¤!<br><br>
        íŒ€ ìˆœìœ„ì™€ íƒ€ì, íˆ¬ìˆ˜ ë³„ë¡œ ìˆœìœ„ë¥¼ ë³¼ ìˆ˜ ìˆì–´ìš”<br>
        ìš°ë¦¬ íŒ€ì—ì„œ ì‘ì›í•˜ëŠ” ì„ ìˆ˜ê°€ ì–´ë–¤ ì„±ì ì„ ê¸°ë¡í•˜ê³  ìˆëŠ”ì§€ í™•ì¸í•´ë³´ì„¸ìš”!
      </p>
    </div>
  </div>

  <!-- ë§ˆì§€ë§‰ ì•ˆë‚´ ë°•ìŠ¤ -->
  <div id="finalMessage" class="bg-white/70 backdrop-blur-sm p-6 rounded-lg text-center max-w-md shadow-xl absolute left-1/2 top-[300px] -translate-x-1/2 hidden select-none">
    <p class="p-2">
        ì£¼ìš” ê¸°ëŠ¥ë“¤ì„ ëª¨ë‘ ì‚´í´ë³´ì…¨ì–´ìš”!
    </p>
    <button onclick="console.log('ë²„íŠ¼ ëˆŒë¦¼'); closeIntro()" class="mt-2 px-4 py-2 bg-gray-600 text-white rounded hover:bg-blue-700">
        ë‹¤ì‹œ ë³´ì§€ ì•Šê¸°
    </button>
  </div>
</div>

<!-- âœ… ìŠ¤íƒ€ì¼ ë° ìŠ¤í¬ë¦½íŠ¸ -->
<style>
  .standing-box {
    border-radius: 15px;
  }

  .hide-scrollbar {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
  
  .hide-scrollbar::-webkit-scrollbar {
    display: none;
  }

  .tab-btn.active {
    filter: brightness(70%);
  }
</style>

<script>
  function showTab(tabId) {
    document.querySelectorAll('.tab-content').forEach(div => div.classList.add('hidden'));
    document.getElementById(tabId).classList.remove('hidden');
    document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
    event.target.classList.add('active');
  }

  function scrollRankingRight() {
    const wrapper = document.getElementById('ranking-scroll-wrapper');
    const visibleWidth = wrapper.clientWidth;
    wrapper.scrollLeft += visibleWidth * 0.7;
  }

  function scrollRankingLeft() {
    const wrapper = document.getElementById('ranking-scroll-wrapper');
    const visibleWidth = wrapper.clientWidth;
    wrapper.scrollLeft -= visibleWidth * 0.7;
  }
  
  function scrollHitter(direction) {
    const wrapper = document.getElementById('hitter-scroll-wrapper');
    const amount = wrapper.clientWidth * 0.6;
    wrapper.scrollLeft += amount * direction;
  }

  function scrollPitcher(direction) {
    const wrapper = document.getElementById('pitcher-scroll-wrapper');
    const amount = wrapper.clientWidth * 0.6;
    wrapper.scrollLeft += amount * direction;
  }

  let sortStates = {};

  function sortTable(tableId, colIndex) {
    const table = document.getElementById(tableId);
    const tbody = table.querySelector("tbody");
    const rows = Array.from(tbody.querySelectorAll("tr"));

    const currentState = sortStates[colIndex] || "none";
    let newState = currentState === "asc" ? "desc" : "asc";
    sortStates[colIndex] = newState;

    rows.sort((a, b) => {
      const valA = a.children[colIndex].innerText.trim();
      const valB = b.children[colIndex].innerText.trim();

      const numA = parseFloat(valA.replace('%', ''));
      const numB = parseFloat(valB.replace('%', ''));

      const isNumber = !isNaN(numA) && !isNaN(numB);
      if (isNumber) {
        return newState === "asc" ? numA - numB : numB - numA;
      } else {
        return newState === "asc"
          ? valA.localeCompare(valB)
          : valB.localeCompare(valA);
      }
    });

    rows.forEach(row => tbody.appendChild(row));
  }

  function showTab(tabId) {
    // ëª¨ë“  íƒ­ ì½˜í…ì¸  ìˆ¨ê¹€
    document.querySelectorAll('.tab-content').forEach(div => div.classList.add('hidden'));
    document.getElementById(tabId).classList.remove('hidden');

    // ëª¨ë“  íƒ­ ë²„íŠ¼ì—ì„œ active ì œê±°
    document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));

    // ì„ íƒí•œ íƒ­ ë²„íŠ¼ì— active ì¶”ê°€
    const selectedBtn = document.getElementById(`${tabId}-tab`);
    if (selectedBtn) {
      selectedBtn.classList.add('active');
    }
  }

  // í˜ì´ì§€ ë¡œë“œ ì‹œ ê¸°ë³¸ íƒ­ ì„ íƒ
  document.addEventListener('DOMContentLoaded', function () {
    showTab('ranking');
  });
</script>

{% endblock %}
