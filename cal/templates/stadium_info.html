{% extends 'base.html' %}
{% load static %}

{% block title %}
{{ stadium.stadium }} | ì§ëŒì´
{% endblock %}

{% block body %}
<main class="max-w-5xl mx-auto text-xs md:text-sm">
  <!-- ê²½ê¸°ì¥ ì´ë¦„ -->
  <div class="text-center p-8">
    <h1 class="text-xl md:text-3xl font-bold">{{ stadium.stadium }}</h1>
  </div>

<!-- ì˜ˆë§¤ ë²„íŠ¼ -->
<section class="text-center p-2">
  {% if stadium.stadium == "ì ì‹¤" %}
    <div class="inline-block relative" id="ticket-dropdown">
      <button id="dropdownToggle"
              class="w-32 px-3 py-1.5 text-xs md:text-sm rounded-md bg-slate-600 text-white font-semibold shadow-md hover:shadow-lg focus:outline-none">
        ì˜ˆë§¤í•˜ê¸°
      </button>
      <ul id="dropdownMenu"
          class="absolute left-0 mt-2 w-32 bg-white border rounded shadow-lg z-50 text-xs md:text-sm hidden">
        <li>
          <a href="https://www.ticketlink.co.kr/sports/137/59"
             target="_blank"
             class="block px-3 py-1.5 hover:bg-gray-100">
            LG íŠ¸ìœˆìŠ¤ ì˜ˆë§¤
          </a>
        </li>
        <li>
          <a href="https://ticket.interpark.com/Contents/Sports/GoodsInfo?SportsCode=07001&TeamCode=PB004"
             target="_blank"
             class="block px-3 py-1.5 hover:bg-gray-100">
            ë‘ì‚° ë² ì–´ìŠ¤ ì˜ˆë§¤
          </a>
        </li>
      </ul>
    </div>
  {% else %}
    <a href="{{ ticket_url }}" target="_blank">
      <button
        class="w-32 px-3 py-1.5 text-xs md:text-sm rounded-md bg-slate-600 text-white font-semibold shadow-md transition-transform hover:-translate-y-1 hover:shadow-lg">
        ì˜ˆë§¤í•˜ê¸°
      </button>
    </a>
  {% endif %}
</section>

<!-- ê¸¸ì°¾ê¸° ë²„íŠ¼ -->
<section class="text-center p-2">
  <a href="{{ google_url }}" target="_blank" rel="noopener noreferrer">
    <button
      class="w-32 px-3 py-1.5 text-xs md:text-sm rounded-md bg-blue-600 text-white font-semibold shadow-md transition-transform hover:-translate-y-1 hover:shadow-lg">
      êµ¬ì¥ê¹Œì§€ ê¸¸ì°¾ê¸°
    </button>
  </a>
</section>



  <!-- ì¢Œì„ ì •ë³´ -->
  <section class="p-4">
    <h2 class="text-lg md:text-2xl font-semibold p-4">ğŸ”¹ ì¢Œì„ ì •ë³´</h2>
    <div class="w-full mb-6">
      <img src="{% static 'cal/images/stadium/' %}{{ stadium.stadium }}.png"
           alt="{{ stadium.stadium }} ì¢Œì„í‘œ"
           class="w-full h-auto rounded-lg shadow-md">
    </div>
    <div class="grid gap-4 md:grid-cols-2">
      {% for seat in seats %}
        <div class="bg-white border rounded-lg p-4 shadow hover:shadow-md transition">
          <h3 class="text-base md:text-lg font-medium">{{ seat.seat_name }}</h3>
          <p class="text-xs md:text-sm text-gray-600 mt-1">{{ seat.note }}</p>
        </div>
      {% empty %}
        <p class="text-gray-500 text-xs md:text-sm">ë“±ë¡ëœ ì¢Œì„ ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤.</p>
      {% endfor %}
    </div>
  </section>

  <!-- ì£¼ì°¨ì¥ ì •ë³´ -->
  <section class="p-4">
    <h2 class="text-lg md:text-2xl font-semibold mb-4">ğŸ…¿ï¸ ê·¼ì²˜ ì£¼ì°¨ì¥ ì •ë³´</h2>
    <div class="grid gap-4 md:grid-cols-2">
      {% for parking in parkings %}
        <div class="bg-white border rounded-lg p-4 shadow hover:shadow-md transition">
          <h3 class="text-base md:text-lg font-medium">{{ parking.parking_name }}</h3>
          <p class="text-xs md:text-sm text-gray-600">{{ parking.adress }}</p>
          <p class="text-xs md:text-sm text-gray-600 mt-1">{{ parking.note }}</p>
        </div>
      {% empty %}
        <p class="text-gray-500 text-xs md:text-sm">ë“±ë¡ëœ ì£¼ì°¨ì¥ ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤.</p>
      {% endfor %}
    </div>
  </section>

  <!-- ì‹ë‹¹ ì •ë³´ -->
  <section class="p-4">
    <h2 class="text-lg md:text-2xl font-semibold mb-4">ğŸ½ ì‹ë‹¹ ì •ë³´</h2>
    <div class="grid gap-4 md:grid-cols-2">
      {% for restaurant in restaurants %}
        <div class="bg-white border rounded-lg p-4 shadow hover:shadow-md transition">
          <h3 class="text-base md:text-lg font-medium">{{ restaurant.restaurant_name }}</h3>
          <p class="text-xs md:text-sm text-gray-600">
            <a href="https://map.naver.com/v5/search/{{ restaurant.adress|add:' ' }}{{ restaurant.restaurant_name|urlencode }}" 
               target="_blank" 
               class="text-blue-600 hover:underline">
              {{ restaurant.adress }}
            </a>
          </p>
          <p class="text-xs md:text-sm text-gray-600 mt-1">{{ restaurant.note }}</p>
        </div>
      {% empty %}
        <p class="text-gray-500 text-xs md:text-sm">ë“±ë¡ëœ ì‹ë‹¹ ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤.</p>
      {% endfor %}
    </div>
  </section>
</main>

<!-- âœ… ë“œë¡­ë‹¤ìš´ ìŠ¤í¬ë¦½íŠ¸ -->
<script>
  document.addEventListener('DOMContentLoaded', () => {
    const toggleButton = document.getElementById('dropdownToggle');
    const menu = document.getElementById('dropdownMenu');

    if (toggleButton && menu) {
      toggleButton.addEventListener('click', () => {
        menu.classList.toggle('hidden');
      });

      document.addEventListener('click', (e) => {
        const dropdown = document.getElementById('ticket-dropdown');
        if (dropdown && !dropdown.contains(e.target)) {
          menu.classList.add('hidden');
        }
      });
    }
  });
</script>
{% endblock %}
