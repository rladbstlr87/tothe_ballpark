{% extends 'base.html' %}
{% load static %}

{% block title %}
{{ stadium.stadium }} | ì§ëŒì´
{% endblock %}

{% block body %}
<main class="max-w-5xl mx-auto text-xs md:text-sm">
  <!-- ê²½ê¸°ì¥ ì´ë¦„ -->
  <div class="text-center p-8">
    <h1 class="text-xl md:text-3xl font-bold">{{ stadium.stadium }}</h1>
  </div>

  <!-- ì˜ˆë§¤ ë²„íŠ¼ -->
  <section class="text-center p-2">
    {% if stadium.stadium == "ì ì‹¤" %}
      <div id="ticket-dropdown" class="inline-block relative">
        <button id="dropdownToggle"
                class="w-32 px-3 py-1.5 text-xs md:text-sm rounded-md bg-slate-600 text-white font-semibold shadow-md hover:shadow-lg focus:outline-none">
          ì˜ˆë§¤í•˜ê¸°
        </button>
        <ul id="dropdownMenu"
            class="absolute left-0 mt-2 w-32 bg-white border rounded shadow-lg z-50 text-xs md:text-sm hidden">
          <li>
            <a href="https://www.ticketlink.co.kr/sports/137/59"
              target="_blank"
              class="block px-3 py-1.5 hover:bg-gray-100">
              LG íŠ¸ìœˆìŠ¤ ì˜ˆë§¤
            </a>
          </li>
          <li>
            <a href="https://ticket.interpark.com/Contents/Sports/GoodsInfo?SportsCode=07001&TeamCode=PB004"
              target="_blank"
              class="block px-3 py-1.5 hover:bg-gray-100">
              ë‘ì‚° ë² ì–´ìŠ¤ ì˜ˆë§¤
            </a>
          </li>
        </ul>
      </div>
    {% else %}
      <a href="{{ ticket_url }}" target="_blank">
        <button
          class="w-32 px-3 py-1.5 text-xs md:text-sm rounded-md bg-slate-600 text-white font-semibold shadow-md transition-transform hover:-translate-y-1 hover:shadow-lg">
          ì˜ˆë§¤í•˜ê¸°
        </button>
      </a>
    {% endif %}
  </section>

  <!-- ê¸¸ì°¾ê¸° ë²„íŠ¼ -->
  <section class="text-center p-2">
    <a id="direction-link" href="{{ google_url }}" target="_blank" rel="noopener noreferrer">
      <button
        class="w-32 px-3 py-1.5 text-xs md:text-sm rounded-md bg-blue-600 text-white font-semibold shadow-md transition-transform hover:-translate-y-1 hover:shadow-lg">
        êµ¬ì¥ê¹Œì§€ ê¸¸ì°¾ê¸°
      </button>
    </a>
  </section>

  <!-- ì¢Œì„ ì •ë³´ -->
  <section id="seat_info" class="p-4">
    <h2 class="text-lg md:text-2xl font-semibold p-4">ğŸ”¹ ì¢Œì„ ì •ë³´</h2>
    <div class="w-full mb-6">
      <img src="{% static 'cal/images/stadium/' %}{{ stadium.stadium }}.png"
          alt="{{ stadium.stadium }} ì¢Œì„í‘œ"
          class="w-full h-auto rounded-lg shadow-md">
    </div>
    <div class="grid gap-4 md:grid-cols-2">
      {% for seat in seats %}
        <div class="bg-white border rounded-lg p-4 shadow hover:shadow-md transition">
          <h3 class="text-base md:text-lg font-medium">{{ seat.seat_name }}</h3>
          <p class="text-xs md:text-sm text-gray-600 mt-1">{{ seat.note }}</p>
        </div>
      {% empty %}
        <p class="text-gray-500 text-xs md:text-sm">ë“±ë¡ëœ ì¢Œì„ ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤.</p>
      {% endfor %}
    </div>
  </section>

  <!-- ì£¼ì°¨ì¥ ì •ë³´ -->
  <section id="parkinglot_info" class="p-4">
    <h2 class="text-lg md:text-2xl font-semibold mb-4">ğŸ…¿ï¸ ê·¼ì²˜ ì£¼ì°¨ì¥ ì •ë³´</h2>
    <div class="grid gap-4 md:grid-cols-2">
      {% for parking in parkings %}
        <div class="bg-white border rounded-lg p-4 shadow hover:shadow-md transition">
          <h3 class="text-base md:text-lg font-medium">{{ parking.parking_name }}</h3>
          <p class="text-xs md:text-sm text-gray-600">{{ parking.adress }}</p>
          <p class="text-xs md:text-sm text-gray-600 mt-1">{{ parking.note }}</p>
        </div>
      {% empty %}
        <p class="text-gray-500 text-xs md:text-sm">ë“±ë¡ëœ ì£¼ì°¨ì¥ ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤.</p>
      {% endfor %}
    </div>
  </section>

  <!-- ì‹ë‹¹ ì •ë³´ -->
  <section id="restaurant_info" class="p-4">
    <h2 class="text-lg md:text-2xl font-semibold mb-4">ğŸ½ ì‹ë‹¹ ì •ë³´</h2>
    <div class="grid gap-4 md:grid-cols-2">
      {% for restaurant in restaurants %}
        <div class="bg-white border rounded-lg p-4 shadow hover:shadow-md transition">
          <h3 class="text-base md:text-lg font-medium">{{ restaurant.restaurant_name }}</h3>
          <p class="text-xs md:text-sm text-gray-600">
            <a href="https://map.naver.com/v5/search/{{ restaurant.adress|add:' ' }}{{ restaurant.restaurant_name|urlencode }}" 
              target="_blank" 
              class="text-blue-600 hover:underline">
              {{ restaurant.adress }}
            </a>
          </p>
          <p class="text-xs md:text-sm text-gray-600 mt-1">{{ restaurant.note }}</p>
        </div>
      {% empty %}
        <p class="text-gray-500 text-xs md:text-sm">ë“±ë¡ëœ ì‹ë‹¹ ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤.</p>
      {% endfor %}
    </div>
  </section>
</main>
<!-- ë°ìŠ¤í¬íƒ‘ íŠœí† ë¦¬ì–¼ -->
<div id="introOverlay" class="fixed grid inset-0 bg-black/40 z-100 cursor-pointer hidden">
  <div class="text-white pt-24">
    <div id="introSteps" class="flex flex-col md:flex-row gap-6 px-4">
      <p class="p-4 mx-auto bg-white/30 backdrop-blur-sm rounded-lg md:absolute md:left-1/2 top-[270px] md:-translate-x-1/2 hidden select-none">
        <strong class="text-2xl">êµ¬ì¥ ì •ë³´</strong>ë¥¼ ì•ˆë‚´ë“œë¦½ë‹ˆë‹¤.<br><br>
        í”„ë¡œì•¼êµ¬ê°€ ì§„í–‰ë˜ëŠ” ê° êµ¬ì¥ì˜ ì •ë³´ë¥¼ í™•ì¸í•´ë³´ì„¸ìš”!<br>
      </p>
      <p class="p-4 mx-auto bg-white/30 backdrop-blur-sm rounded-lg md:absolute md:left-5/7 top-[180px] md:-translate-x-1/2 hidden select-none">
        <strong class="text-xl">ì˜ˆë§¤</strong>ë¥¼ í´ë¦­í•˜ë©´ êµ¬ì¥ì˜ ì˜ˆë§¤ í˜ì´ì§€ë¡œ ì´ë™ë˜êµ¬ìš”<br><br>
        <strong class="text-xl">êµ¬ì¥ê¹Œì§€ ê¸¸ì°¾ê¸°</strong>ëŠ” ë„¤ì´ë²„ì§€ë„ì—ì„œ ê²½ë¡œ ë„ì°©ì§€ë¥¼ êµ¬ì¥ìœ¼ë¡œ ì„¤ì •í•´ë“œë ¤ìš”!<br>
      </p>
      <p class="p-4 mx-auto bg-white/30 backdrop-blur-sm rounded-lg md:absolute md:left-3/7 md:-translate-x-1/3 hidden select-none">
        <strong class="text-2xl">ì¢Œì„ì •ë³´</strong>ëŠ” ì˜ˆë§¤ ì „ ì°¸ê³ í•  ìˆ˜ ìˆëŠ” ì¢Œì„ ìœ„ì¹˜ì™€ ì¢…ë¥˜ë¥¼ ì•Œ ìˆ˜ ìˆì–´ìš”.<br>
        <strong>ì¢Œì„</strong>ë³„ë¡œ ì‚´í´ë³´ì‹œê³  ì–´ë–¤ ì¢Œì„ì´ ì¢‹ì„ì§€ êµ¬ê²½í•´ë³´ì„¸ìš”!
      </p>
      <p class="p-4 mx-auto bg-white/30 backdrop-blur-sm rounded-lg md:absolute md:left-1/2 top-[100px] md:-translate-x-1/2 hidden select-none">
        <strong class="text-2xl">ì£¼ì°¨ì¥ ì •ë³´</strong>ëŠ” êµ¬ì¥ì˜ ì£¼ì°¨ì¥ì„ ì´ìš©í•˜ì§€ ì•Šì„ ê²½ìš°,<br>
        ì¸ê·¼ì˜ ê°€ê¹Œìš´ <strong>ì£¼ì°¨ì¥</strong>ì˜ ì •ë³´ë¥¼ í™•ì¸í•´ë³´ì„¸ìš”!
      </p>
      <p class="p-4 mx-auto bg-white/30 backdrop-blur-sm rounded-lg md:absolute md:left-1/2 top-[200px] md:-translate-x-1/2 hidden select-none">
        <strong class="text-2xl">ì‹ë‹¹ ì •ë³´</strong>ëŠ” ì•¼êµ¬ ê´€ëŒ ì „í›„ë¡œ ì´ìš©í•  ìˆ˜ ìˆëŠ”<br>
        ë§›ì§‘ë“¤ì„ í™•ì¸í•  ìˆ˜ ìˆì–´ìš”.<br>
        ì‹¤ì œ ì•¼êµ¬ ì„ ìˆ˜ë“¤ì´ ì¢…ì¢… ì°¾ì•„ê°€ëŠ” ë§›ì§‘ë„ ìˆìœ¼ë‹ˆ,<br>
        ì•¼êµ¬ ê´€ëŒê³¼ ê´€ê³„ì—†ì´ í‰ì†Œì— ê°€ë³´ì‹œë©´<br>
        ì‘ì›í•˜ëŠ” ì„ ìˆ˜ë¥¼ ë°œê²¬(?)í•˜ì‹¤ ìˆ˜ë„ ìˆì–´ìš”!
      </p>
    </div>
  </div>

  <!-- ë§ˆì§€ë§‰ ì•ˆë‚´ ë°•ìŠ¤ -->
  <div id="finalMessage" class="bg-white/70 backdrop-blur-sm p-6 rounded-lg text-center max-w-md shadow-xl absolute left-1/2 top-[300px] -translate-x-1/2 hidden select-none">
    <p class="p-2">
        ì£¼ìš” ê¸°ëŠ¥ë“¤ì„ ëª¨ë‘ ì‚´í´ë³´ì…¨ì–´ìš”!
    </p>
    <button onclick="closeIntro()" class="mt-2 px-4 py-2 bg-gray-600 text-white rounded hover:bg-blue-700">
        ë‹¤ì‹œ ë³´ì§€ ì•Šê¸°
    </button>
  </div>
</div>

<!-- ë“œë¡­ë‹¤ìš´ ìŠ¤í¬ë¦½íŠ¸ -->
<script>
  document.addEventListener('DOMContentLoaded', () => {
    const toggleButton = document.getElementById('dropdownToggle');
    const menu = document.getElementById('dropdownMenu');

    if (toggleButton && menu) {
      toggleButton.addEventListener('click', () => {
        menu.classList.toggle('hidden');
      });

      document.addEventListener('click', (e) => {
        const dropdown = document.getElementById('ticket-dropdown');
        if (dropdown && !dropdown.contains(e.target)) {
          menu.classList.add('hidden');
        }
      });
    }
  });
  const isMobile = /iPhone|Android|iPad|iPod/i.test(navigator.userAgent);

  // ëª¨ë°”ì¼ì´ë¼ë©´ hrefë¥¼ ë„¤ì´ë²„ ì§€ë„ ë§í¬ë¡œ ë³€ê²½
  if (isMobile) {
    const naverUrl = "{{ naver_url|safe }}";
    const link = document.getElementById('direction-link');
    if (naverUrl && link) {
      link.href = naverUrl;
    }
  }
</script>
{% endblock %}
